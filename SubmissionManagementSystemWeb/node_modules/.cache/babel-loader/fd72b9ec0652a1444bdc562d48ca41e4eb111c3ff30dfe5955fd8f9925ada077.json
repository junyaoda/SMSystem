{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport constant from '@/consts/const';\nexport default {\n  data() {\n    return {\n      users: [],\n      groupId: this.$route.params.groupId,\n      groupName: this.$route.params.groupName,\n      selectedUserIdList: [],\n      loop: Math.floor(Number(this.$route.params.groupMember.length) / 4) + 1\n    };\n  },\n  //入力フォームに入力時、処理実施\n  computed: {\n    //入力チェック\n    inputCheck() {\n      //グループ名が未入力もしくは空白行のみの場合\n      if (!this.groupName.match(/\\S/g)) {\n        //非活性\n        return false;\n      } else {\n        //メンバーが未選択の場合\n        if (this.selectedUserIdList.length == 0) {\n          //非活性\n          return false;\n        }\n        for (let selectedUser of this.selectedUserIdList) {\n          confirm(Number(selectedUser.id));\n          //ユーザが一人でも選択されている場合\n          if (Number(selectedUser.id) !== constant.DELETE_MEMBER_ID && !isNaN(Number(selectedUser.id))) {\n            //活性\n            return true;\n          }\n        }\n        //削除IDのみの場合、非活性\n        return false;\n      }\n    }\n  },\n  created() {\n    this.selectAll();\n    for (let i = 0; i < this.$route.params.groupMember.length; i++) {\n      this.selectedUserIdList[i] = this.$route.params.groupMember[i];\n    }\n  },\n  methods: {\n    addForm() {\n      this.loop = this.loop + 1;\n    },\n    selectAll() {\n      const path = constant.SELECT_USER_PULLDOWN_PATH;\n      axios.get(path).then(response => {\n        this.users = response.data;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    update(groupId, groupName, selectedUserIdList) {\n      var res = confirm(constant.UPDATE_CONFIRM_MESSAGE);\n      var userIdList = [];\n      for (let userId of selectedUserIdList) {\n        if (userId !== null && typeof userId === 'object') {\n          userIdList.push(userId);\n        }\n      }\n      if (res == true) {\n        const path = constant.UPDATE_GROUP_PATH;\n        axios.post(path, {\n          groupId: groupId,\n          groupName: groupName,\n          user: userIdList\n        }).then(response => {\n          console.log(response.data);\n          this.$router.push({\n            name: \"PageLoading\",\n            params: {\n              message: constant.UPDATE_COMPLETE_MESSAGE,\n              pageCode: constant.GROUP_MANAGEMENT_PAGE\n            }\n          });\n        }).catch(err => {\n          console.log(\"err:\", err);\n          this.$router.push({\n            name: \"GroupManagement\",\n            params: {\n              message: constant.ERROR_MESSAGE\n            }\n          });\n        });\n      }\n    },\n    back() {\n      this.$router.push({\n        name: \"GroupManagement\"\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","constant","data","users","groupId","$route","params","groupName","selectedUserIdList","loop","Math","floor","Number","groupMember","length","computed","inputCheck","match","selectedUser","confirm","id","DELETE_MEMBER_ID","isNaN","created","selectAll","i","methods","addForm","path","SELECT_USER_PULLDOWN_PATH","get","then","response","catch","error","console","log","update","res","UPDATE_CONFIRM_MESSAGE","userIdList","userId","push","UPDATE_GROUP_PATH","post","user","$router","name","message","UPDATE_COMPLETE_MESSAGE","pageCode","GROUP_MANAGEMENT_PAGE","err","ERROR_MESSAGE","back"],"sources":["src/pages/GroupUpdate.vue"],"sourcesContent":["<template>\n    <v-container>\n        <v-row>\n            <v-col cols=\"11\">\n                <h2>\n                    グループ更新\n                </h2>\n            </v-col>\n            <v-col>\n                <v-btn small fab dark color=\"indigo\" @click=\"back()\">\n                    <v-icon dark> mdi-undo-variant </v-icon>\n                </v-btn>\n            </v-col>\n        </v-row>\n        <v-row>\n            <v-col>\n                <v-text-field hide-details=\"auto\" @keyup=\"inputCheck\" v-model=\"groupName\" label=\"グループ名\"></v-text-field>\n            </v-col>\n        </v-row>\n        <div v-for=\"n in loop\" :key=\"n\">\n            <v-row>\n                <v-col cols=\"3\">\n                    <v-select item-text=\"userName\" :items=\"users\" item-value=\"id\" label=\"ユーザ名\" class=\"ma-2\"\n                        @keyup=\"inputCheck\" v-model=\"selectedUserIdList[4 * (n - 1)]\" return-object></v-select>\n                </v-col>\n                <v-col cols=\"3\">\n                    <v-select item-text=\"userName\" :items=\"users\" item-value=\"id\" label=\"ユーザ名\" class=\"ma-2\"\n                        @keyup=\"inputCheck\" v-model=\"selectedUserIdList[4 * n - 3]\" return-object></v-select>\n                </v-col>\n                <v-col cols=\"3\">\n                    <v-select item-text=\"userName\" :items=\"users\" item-value=\"id\" label=\"ユーザ名\" class=\"ma-2\"\n                        @keyup=\"inputCheck\" v-model=\"selectedUserIdList[4 * n - 2]\" return-object></v-select>\n                </v-col>\n                <v-col cols=\"3\">\n                    <v-select item-text=\"userName\" :items=\"users\" item-value=\"id\" label=\"ユーザ名\" class=\"ma-2\"\n                        @keyup=\"inputCheck\" v-model=\"selectedUserIdList[4 * n - 1]\" return-object></v-select>\n                </v-col>\n            </v-row>\n        </div>\n        <v-row>\n            <v-col cols=\"1\">\n                <v-btn small fab dark color=\"indigo\" @click=\"addForm()\">\n                    <v-icon dark> mdi-plus </v-icon>\n                </v-btn>\n            </v-col>\n        </v-row>\n        <v-layout>\n            <v-btn class=\"mx-auto\" :disabled=\"!inputCheck\" @click=\"update(groupId, groupName, selectedUserIdList)\">\n                Update\n            </v-btn>\n        </v-layout>\n    </v-container>\n</template>\n\n<script>\nimport axios from 'axios';\nimport constant from '@/consts/const';\nexport default {\n    data() {\n        return {\n            users: [],\n            groupId: this.$route.params.groupId,\n            groupName: this.$route.params.groupName,\n            selectedUserIdList: [],\n            loop: Math.floor(Number(this.$route.params.groupMember.length) / 4) + 1,\n        };\n    },\n    //入力フォームに入力時、処理実施\n    computed: {\n        //入力チェック\n        inputCheck() {\n            //グループ名が未入力もしくは空白行のみの場合\n            if (!(this.groupName.match(/\\S/g))) {\n                //非活性\n                return false\n            }\n            else {\n                //メンバーが未選択の場合\n                if (this.selectedUserIdList.length == 0) {\n                    //非活性\n                    return false\n                }\n                for (let selectedUser of this.selectedUserIdList) {\n                    confirm(Number(selectedUser.id))\n                    //ユーザが一人でも選択されている場合\n                    if (Number(selectedUser.id) !== constant.DELETE_MEMBER_ID && !(isNaN(Number(selectedUser.id)))) {\n                        //活性\n                        return true\n                    }\n                }\n                //削除IDのみの場合、非活性\n                return false\n            }\n        }\n    },\n    created() {\n        this.selectAll()\n        for (let i = 0; i < this.$route.params.groupMember.length; i++) {\n            this.selectedUserIdList[i] = this.$route.params.groupMember[i]\n        }\n    },\n    methods: {\n        addForm() {\n            this.loop = this.loop + 1\n        },\n        selectAll() {\n            const path = constant.SELECT_USER_PULLDOWN_PATH;\n            axios.get(path)\n                .then(response => {\n                    this.users = response.data\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n        },\n        update(groupId, groupName, selectedUserIdList) {\n            var res = confirm(constant.UPDATE_CONFIRM_MESSAGE);\n\n            var userIdList = [];\n            for (let userId of selectedUserIdList) {\n                if (userId !== null && typeof userId === 'object') {\n                    userIdList.push(userId);\n                }\n            }\n\n            if (res == true) {\n                const path = constant.UPDATE_GROUP_PATH\n                axios.post(path, {\n                    groupId: groupId,\n                    groupName: groupName,\n                    user: userIdList,\n                }\n                )\n                    .then(response => {\n                        console.log(response.data);\n                        this.$router.push({\n                            name: \"PageLoading\",\n                            params: {\n                                message: constant.UPDATE_COMPLETE_MESSAGE,\n                                pageCode: constant.GROUP_MANAGEMENT_PAGE\n                            }\n                        });\n                    })\n                    .catch(err => {\n                        console.log(\"err:\", err);\n                        this.$router.push({\n                            name: \"GroupManagement\",\n                            params: {\n                                message: constant.ERROR_MESSAGE\n                            }\n                        });\n                    });\n            }\n        },\n        back() {\n            this.$router.push({\n                name: \"GroupManagement\"\n            })\n        },\n    }\n}\n</script>\n\n<style scoped></style>"],"mappings":";AAuDA,OAAAA,KAAA;AACA,OAAAC,QAAA;AACA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,OAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAF,OAAA;MACAG,SAAA,OAAAF,MAAA,CAAAC,MAAA,CAAAC,SAAA;MACAC,kBAAA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,MAAA,MAAAP,MAAA,CAAAC,MAAA,CAAAO,WAAA,CAAAC,MAAA;IACA;EACA;EACA;EACAC,QAAA;IACA;IACAC,WAAA;MACA;MACA,UAAAT,SAAA,CAAAU,KAAA;QACA;QACA;MACA,OACA;QACA;QACA,SAAAT,kBAAA,CAAAM,MAAA;UACA;UACA;QACA;QACA,SAAAI,YAAA,SAAAV,kBAAA;UACAW,OAAA,CAAAP,MAAA,CAAAM,YAAA,CAAAE,EAAA;UACA;UACA,IAAAR,MAAA,CAAAM,YAAA,CAAAE,EAAA,MAAAnB,QAAA,CAAAoB,gBAAA,KAAAC,KAAA,CAAAV,MAAA,CAAAM,YAAA,CAAAE,EAAA;YACA;YACA;UACA;QACA;QACA;QACA;MACA;IACA;EACA;EACAG,QAAA;IACA,KAAAC,SAAA;IACA,SAAAC,CAAA,MAAAA,CAAA,QAAApB,MAAA,CAAAC,MAAA,CAAAO,WAAA,CAAAC,MAAA,EAAAW,CAAA;MACA,KAAAjB,kBAAA,CAAAiB,CAAA,SAAApB,MAAA,CAAAC,MAAA,CAAAO,WAAA,CAAAY,CAAA;IACA;EACA;EACAC,OAAA;IACAC,QAAA;MACA,KAAAlB,IAAA,QAAAA,IAAA;IACA;IACAe,UAAA;MACA,MAAAI,IAAA,GAAA3B,QAAA,CAAA4B,yBAAA;MACA7B,KAAA,CAAA8B,GAAA,CAAAF,IAAA,EACAG,IAAA,CAAAC,QAAA;QACA,KAAA7B,KAAA,GAAA6B,QAAA,CAAA9B,IAAA;MACA,GACA+B,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;MACA;IACA;IACAG,OAAAjC,OAAA,EAAAG,SAAA,EAAAC,kBAAA;MACA,IAAA8B,GAAA,GAAAnB,OAAA,CAAAlB,QAAA,CAAAsC,sBAAA;MAEA,IAAAC,UAAA;MACA,SAAAC,MAAA,IAAAjC,kBAAA;QACA,IAAAiC,MAAA,oBAAAA,MAAA;UACAD,UAAA,CAAAE,IAAA,CAAAD,MAAA;QACA;MACA;MAEA,IAAAH,GAAA;QACA,MAAAV,IAAA,GAAA3B,QAAA,CAAA0C,iBAAA;QACA3C,KAAA,CAAA4C,IAAA,CAAAhB,IAAA;UACAxB,OAAA,EAAAA,OAAA;UACAG,SAAA,EAAAA,SAAA;UACAsC,IAAA,EAAAL;QACA,CACA,EACAT,IAAA,CAAAC,QAAA;UACAG,OAAA,CAAAC,GAAA,CAAAJ,QAAA,CAAA9B,IAAA;UACA,KAAA4C,OAAA,CAAAJ,IAAA;YACAK,IAAA;YACAzC,MAAA;cACA0C,OAAA,EAAA/C,QAAA,CAAAgD,uBAAA;cACAC,QAAA,EAAAjD,QAAA,CAAAkD;YACA;UACA;QACA,GACAlB,KAAA,CAAAmB,GAAA;UACAjB,OAAA,CAAAC,GAAA,SAAAgB,GAAA;UACA,KAAAN,OAAA,CAAAJ,IAAA;YACAK,IAAA;YACAzC,MAAA;cACA0C,OAAA,EAAA/C,QAAA,CAAAoD;YACA;UACA;QACA;MACA;IACA;IACAC,KAAA;MACA,KAAAR,OAAA,CAAAJ,IAAA;QACAK,IAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}